# üõç **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**

–°–µ–≥–æ–¥–Ω—è –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º **–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞** —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–≤–∞—Ä–∞.

---

## üîó **1. –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–º –º–∞—Ä—à—Ä—É—Ç `order_create`**

–°–¥–µ–ª–∞–µ–º –º–∞—Ä—à—Ä—É—Ç **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º**, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–ª –ø–∞—Ä–∞–º–µ—Ç—Ä `id` –ø—Ä–æ–¥—É–∫—Ç–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —á–∞—Å—Ç—å URL —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, `path('order_create/<int:product_id>/')` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–≤–ª–µ—á—å –∑–Ω–∞—á–µ–Ω–∏–µ `product_id` –∏–∑ URL –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ.

üìå –≠—Ç–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤) –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ URL `http://127.0.0.1:8000/shop/order_create/1/` –ø–∞—Ä–∞–º–µ—Ç—Ä `1` –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –≤ —Ñ—É–Ω–∫—Ü–∏—é `order_create` –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `product_id`.

```python
# shop/urls.py
urlpatterns = [
    path('order_create/<int:product_id>/', order_create, name='order_create'),
]
```

---

## üéØ **2. –î–æ–¥–µ–ª–∞–µ–º –∫–Ω–æ–ø–∫—É —Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞ –≤ `product_detail.html`**

–î–æ–±–∞–≤–∏–º `href`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ –µ–≥–æ `id`. –≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞ —à–∞–±–ª–æ–Ω–∞ `{% url %}`, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ–Ω–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

üìå –ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ —à–∞–±–ª–æ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `{% url 'order_create' product_id=product.id %}` –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ —Å—Å—ã–ª–∫—É –≤–∏–¥–∞ `http://127.0.0.1:8000/shop/order_create/1/`, –≥–¥–µ `1` ‚Äî —ç—Ç–æ `id` —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞.

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `product_detail.html` –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `product`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∫ —Ä–∞–∑ –Ω—É–∂–Ω—ã–π –Ω–∞–º `id`.

```html
<!-- product_detail.html -->
...
<a href="{% url 'order_create' product_id=product.id %}"
   class="btn fs-4 btn-outline-secondary w-100 mt-3">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
...
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç**, –∏ –∫–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞—Å –Ω–∞ `order_create` —Å –≤–µ—Ä–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º `id` –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.

–ü—Ä–∏–º–µ—Ä: `http://127.0.0.1:8000/shop/order_create/1/`

---

## üìù **3. –î–æ–¥–µ–ª–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞**

### üîç **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞**
–¢–∞–∫ –∫–∞–∫ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –Ω–∞–º –Ω—É–∂–µ–Ω **–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** —Ç–æ–≥–æ, —á—Ç–æ –º—ã –∑–∞–∫–∞–∑—ã–≤–∞–µ–º, —Å–∫–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ –∏–∑ `product_detail.html`, –∏–∑–º–µ–Ω–∏–≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `<h1>` –∏ —Ç–µ–≥ `<title>`.

### üìÑ **–§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞**
–°–æ–∑–¥–∞–¥–∏–º —Ñ–æ—Ä–º—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ `Order`.

üìå **–§–æ—Ä–º–∞** ‚Äî —ç—Ç–æ —Å—Ä–µ–¥—Å—Ç–≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –ø–æ–∑–≤–æ–ª—è—é—â–µ–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ü–æ–ª—è —Ñ–æ—Ä–º—ã –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–ª—è–º –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø–æ–ª–Ω–∏—Ç—å.

üìã **–ö–∞–∫–∏–µ –ø–æ–ª—è –Ω–∞–º –Ω—É–∂–Ω—ã?**
- –ü–æ–ª–µ **product** ‚Äî –≤ —Ñ–æ—Ä–º–µ **–Ω–µ –Ω—É–∂–Ω–æ**, —Ç–∞–∫ –∫–∞–∫ –º—ã –ø–µ—Ä–µ–¥–∞—ë–º `id` –ø—Ä–æ–¥—É–∫—Ç–∞ —á–µ—Ä–µ–∑ URL.
- –ü–æ–ª–µ **delivery_address** ‚Äî –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ `POST` –∑–∞–ø—Ä–æ—Å.
- –ü–æ–ª–µ **created_at** ‚Äî –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ—ç—Ç–æ–º—É **–Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è** –≤ —Ñ–æ—Ä–º—É.

üìå –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **–æ—Ç–ø—Ä–∞–≤–∫–∏**, –±—Ä–∞—É–∑–µ—Ä —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å, –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —á–µ—Ä–µ–∑ `POST`) –∏ –æ–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç. –°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç `Order` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### üìå **HTML –∫–æ–¥ —Ñ–æ—Ä–º—ã**
```html
<!-- order_create.html -->
{% extends 'shop/base.html' %}
{% block title %}Shop | Order {{ product.name }} {% endblock %}

{% block content %}
    <div class="d-flex gap-3 flex-wrap justify-content-center mx-auto"
         style="max-width: 300px;">
        <div class="d-flex flex-column align-items-start text-center border-0 rounded-4 text-nowrap px-4 py-4"
             style="width: min-content; box-shadow: 0 0 5px #00000022;">
            <h1 class="text-wrap">–ó–∞–∫–∞–∑ {{ product.name }}</h1>
            <span class="fs-5">{{ product.desc }}</span>
            <form action="{% url 'order_create' product_id=product.id %}"
                  class="d-flex flex-column justify-content-center mx-auto mt-3"
                  method="post">{% csrf_token %}
                <input name="delivery_address" type="text"
                       class="form-control"
                       required
                       placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏">
                <button type="submit"
                        class="btn fs-4 btn-outline-secondary w-100 mt-3">
                    –ó–∞–∫–∞–∑–∞—Ç—å</button>
            </form>
        </div>
    </div>
{% endblock %}
```

üìå **–û—à–∏–±–∫–∞:** –ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, —Ç–æ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –æ—à–∏–±–∫–∞. **–ü–æ—á–µ–º—É?** ü§î

### üéØ **–ü–µ—Ä–µ–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `product` –≤ —à–∞–±–ª–æ–Ω**
–ü–µ—Ä–µ–¥–∞–¥–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–∞–∫ –º—ã –¥–µ–ª–∞–ª–∏ –≤ `product_detail`.

```python
# shop/views.py
def order_create(request, product_id):
    product = Product.objects.get(id=product_id)
    return render(request, 'shop/order_create.html', {
        'product': product
    })
```

---

## üì© **4. –ü—Ä–∏–Ω–∏–º–∞–µ–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ**

–°–µ–π—á–∞—Å –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å—Ç–æ **–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**. –ü–æ—á–µ–º—É? ü§î

üìå –ú—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å —Ç–∏–ø–∞ **GET**, —Ö–æ—Ç—è —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **POST**. –ù–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö `POST` –∑–∞–ø—Ä–æ—Å–∞.

```python
# shop/views.py
def order_create(request, product_id):
    product = Product.objects.get(id=product_id)
    if request.method == 'POST':
        Order.objects.create(
            product=product,
            delivery_address=request.POST.get('delivery_address')
        )
    return render(request, 'shop/order_create.html', {
        'product': product
    })
```

---

## üîÑ **5. –î–µ–ª–∞–µ–º —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏**

üìå **–í—Å–ø–æ–º–∏–Ω–∞–µ–º, –∫–∞–∫ –¥–µ–ª–∞—é—Ç—Å—è —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã:**

```python
# shop/views.py
def order_create(request, product_id):
    product = Product.objects.get(id=product_id)
    if request.method == 'POST':
        Order.objects.create(
            product=product,
            delivery_address=request.POST.get('delivery_address')
        )
        return redirect('orders')
    return render(request, 'shop/order_create.html', {
        'product': product
    })
```

‚úÖ **–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–∫–∞–∑–æ–≤!** üéâ

## –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| **Product matching query does not exist.** | –ü—Ä–æ–¥—É–∫—Ç —Å —Ç–∞–∫–∏–º `id` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π `product_id` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ª–∏–±–æ –¥–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏—è `Product.DoesNotExist`. |
| **NoReverseMatch at /shop/product/...** | –í —à–∞–±–ª–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `{% url 'product_detail' product.id %}`, –Ω–æ –º–∞—Ä—à—Ä—É—Ç `product_detail` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ `urls.py`. | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `shop/urls.py` –µ—Å—Ç—å `path('shop/product/<int:product_id>/', views.product_detail, name='product_detail')`. |
| **TypeError: int() argument must be a string, a bytes-like object or a number, not 'NoneType'** | –í `order_create` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è `None` –≤–º–µ—Å—Ç–æ `product_id`. | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `product_id` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ URL –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. |
| **CSRF verification failed. Request aborted.** | –í —Ñ–æ—Ä–º–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `{% csrf_token %}`. | –î–æ–±–∞–≤—å—Ç–µ `{% csrf_token %}` –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ `input`. |
| **Method Not Allowed (GET, HEAD, OPTIONS)** | –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `POST`, –Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `POST` –∑–∞–ø—Ä–æ—Å—ã. | –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `order_create` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `request.method == 'POST'` –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ñ–æ—Ä–º—ã. |
| **Cannot assign "<Product: –¢–æ–≤–∞—Ä>": "Order.product" must be a "Product" instance.** | –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞: –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–µ –æ–±—ä–µ–∫—Ç `Product`, –∞ –µ–≥–æ `id`. | –í `Order.objects.create()` –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–∞–º –æ–±—ä–µ–∫—Ç `Product`, –∞ –Ω–µ `product_id`. |

